(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[432],{3406:function(e,i,a){Promise.resolve().then(a.bind(a,139))},139:function(e,i,a){"use strict";a.r(i),a.d(i,{default:function(){return h}});var t=a(7437),n=a(9827),r=a(1713),s=a(1770),l=a(9376),d=a(8320),o=a(2869),c=a(6070),u=a(5186),p=a(6815),m=a(3647),x=a(9116);function h(){let e=(0,l.useRouter)(),i=(0,n.NL)(),{data:a}=(0,r.a)({queryKey:["companies"],queryFn:async()=>(await x.Z.get("/companies")).data}),h=(0,s.D)({mutationFn:async e=>(await x.Z.post("/opportunities",e)).data,onSuccess:()=>{i.invalidateQueries({queryKey:["opportunities"]}),e.push("/crm")}});return(0,t.jsx)(d.c,{children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Nueva Oportunidad"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Crea una nueva oportunidad de venta"})]}),(0,t.jsxs)(c.Zb,{children:[(0,t.jsx)(c.Ol,{children:(0,t.jsx)(c.ll,{children:"Informaci\xf3n de la Oportunidad"})}),(0,t.jsx)(c.aY,{children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault();let i=new FormData(e.currentTarget),a=JSON.parse(localStorage.getItem("user")||"{}");h.mutate({companyId:i.get("companyId"),contactId:i.get("contactId")||null,name:i.get("name"),description:i.get("description"),estimatedValue:parseFloat(i.get("estimatedValue")),probability:parseInt(i.get("probability"))||0,stage:i.get("stage")||"LEAD",source:i.get("source")||null,expectedCloseDate:i.get("expectedCloseDate")||null,ownerId:a.id})},className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(p._,{htmlFor:"companyId",children:"Empresa *"}),(0,t.jsxs)(m.P,{id:"companyId",name:"companyId",required:!0,children:[(0,t.jsx)("option",{value:"",children:"Seleccionar empresa..."}),null==a?void 0:a.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p._,{htmlFor:"name",children:"Nombre de la Oportunidad *"}),(0,t.jsx)(u.I,{id:"name",name:"name",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p._,{htmlFor:"description",children:"Descripci\xf3n"}),(0,t.jsx)(u.I,{id:"description",name:"description"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(p._,{htmlFor:"estimatedValue",children:"Valor Estimado *"}),(0,t.jsx)(u.I,{id:"estimatedValue",name:"estimatedValue",type:"number",step:"0.01",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p._,{htmlFor:"probability",children:"Probabilidad (%)"}),(0,t.jsx)(u.I,{id:"probability",name:"probability",type:"number",min:"0",max:"100",defaultValue:"0"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(p._,{htmlFor:"stage",children:"Etapa"}),(0,t.jsxs)(m.P,{id:"stage",name:"stage",children:[(0,t.jsx)("option",{value:"LEAD",children:"Lead"}),(0,t.jsx)("option",{value:"CONTACTADO",children:"Contactado"}),(0,t.jsx)("option",{value:"DIAGNOSTICO",children:"Diagn\xf3stico"}),(0,t.jsx)("option",{value:"PROPUESTA_ENVIADA",children:"Propuesta Enviada"}),(0,t.jsx)("option",{value:"NEGOCIACION",children:"Negociaci\xf3n"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p._,{htmlFor:"source",children:"Origen"}),(0,t.jsxs)(m.P,{id:"source",name:"source",children:[(0,t.jsx)("option",{value:"",children:"Seleccionar..."}),(0,t.jsx)("option",{value:"WEB",children:"Web"}),(0,t.jsx)("option",{value:"REFERIDO",children:"Referido"}),(0,t.jsx)("option",{value:"CAMPA\xd1A",children:"Campa\xf1a"}),(0,t.jsx)("option",{value:"EVENTO",children:"Evento"}),(0,t.jsx)("option",{value:"REDES_SOCIALES",children:"Redes Sociales"}),(0,t.jsx)("option",{value:"LLAMADA_DIRECTA",children:"Llamada Directa"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(p._,{htmlFor:"expectedCloseDate",children:"Fecha Estimada de Cierre"}),(0,t.jsx)(u.I,{id:"expectedCloseDate",name:"expectedCloseDate",type:"date"})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,t.jsx)(o.z,{type:"button",variant:"outline",onClick:()=>e.back(),children:"Cancelar"}),(0,t.jsx)(o.z,{type:"submit",disabled:h.isPending,children:h.isPending?"Creando...":"Crear Oportunidad"})]})]})})]})]})})}},5186:function(e,i,a){"use strict";a.d(i,{I:function(){return s}});var t=a(7437),n=a(2265),r=a(1994);let s=n.forwardRef((e,i)=>{let{className:a,type:n,...s}=e;return(0,t.jsx)("input",{type:n,className:(0,r.W)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:i,...s})});s.displayName="Input"},6815:function(e,i,a){"use strict";a.d(i,{_:function(){return s}});var t=a(7437),n=a(2265),r=a(1994);let s=n.forwardRef((e,i)=>{let{className:a,...n}=e;return(0,t.jsx)("label",{ref:i,className:(0,r.W)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...n})});s.displayName="Label"},3647:function(e,i,a){"use strict";a.d(i,{P:function(){return s}});var t=a(7437),n=a(2265),r=a(1994);let s=n.forwardRef((e,i)=>{let{className:a,children:n,...s}=e;return(0,t.jsx)("select",{className:(0,r.W)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:i,...s,children:n})});s.displayName="Select"}},function(e){e.O(0,[301,21,429,713,82,971,117,744],function(){return e(e.s=3406)}),_N_E=e.O()}]);