(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[146],{5150:function(e,s,r){Promise.resolve().then(r.bind(r,8074))},8074:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return y}});var i=r(7437),t=r(2265),a=r(9827),l=r(1713),n=r(1770),d=r(8320),c=r(2869),o=r(6070),x=r(5186),u=r(6815),m=r(3647),h=r(9116),j=r(9397),p=r(8896),f=r(525);function y(){let[e,s]=(0,t.useState)(!1),r=(0,a.NL)(),{data:y,isLoading:v}=(0,l.a)({queryKey:["okrs"],queryFn:async()=>(await h.Z.get("/okr")).data}),{data:b}=(0,l.a)({queryKey:["okr-dashboard"],queryFn:async()=>(await h.Z.get("/okr/dashboard")).data}),g=(0,n.D)({mutationFn:async e=>(await h.Z.post("/okr",e)).data,onSuccess:()=>{r.invalidateQueries({queryKey:["okrs"]}),s(!1)}});return v?(0,i.jsx)(d.c,{children:(0,i.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary-700 border-r-transparent"}),(0,i.jsx)("p",{className:"mt-2 text-gray-600",children:"Cargando OKRs..."})]})})}):(0,i.jsx)(d.c,{children:(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"OKR"}),(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Objetivos y Resultados Clave"})]}),(0,i.jsxs)(c.z,{onClick:()=>s(!e),children:[(0,i.jsx)(j.Z,{className:"mr-2 h-4 w-4"}),"Nuevo OKR"]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-3",children:[(0,i.jsxs)(o.Zb,{children:[(0,i.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,i.jsx)(o.ll,{className:"text-sm font-medium",children:"Total OKRs"}),(0,i.jsx)(p.Z,{className:"h-4 w-4 text-gray-500"})]}),(0,i.jsx)(o.aY,{children:(0,i.jsx)("div",{className:"text-2xl font-bold",children:(null==b?void 0:b.totalOkrs)||0})})]}),(0,i.jsxs)(o.Zb,{children:[(0,i.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,i.jsx)(o.ll,{className:"text-sm font-medium",children:"Progreso Promedio"}),(0,i.jsx)(f.Z,{className:"h-4 w-4 text-gray-500"})]}),(0,i.jsx)(o.aY,{children:(0,i.jsxs)("div",{className:"text-2xl font-bold",children:[(null==b?void 0:b.averageProgress)||0,"%"]})})]}),(0,i.jsxs)(o.Zb,{children:[(0,i.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,i.jsx)(o.ll,{className:"text-sm font-medium",children:"KRs Completados"}),(0,i.jsx)(p.Z,{className:"h-4 w-4 text-gray-500"})]}),(0,i.jsx)(o.aY,{children:(0,i.jsxs)("div",{className:"text-2xl font-bold",children:[(null==b?void 0:b.completedKrs)||0," / ",(null==b?void 0:b.totalKrs)||0]})})]})]}),e&&(0,i.jsxs)(o.Zb,{children:[(0,i.jsx)(o.Ol,{children:(0,i.jsx)(o.ll,{children:"Crear Nuevo OKR"})}),(0,i.jsx)(o.aY,{children:(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault();let s=new FormData(e.currentTarget),r=JSON.parse(localStorage.getItem("user")||"{}");g.mutate({title:s.get("title"),description:s.get("description"),area:s.get("area"),period:s.get("period"),startDate:s.get("startDate"),endDate:s.get("endDate"),ownerId:r.id})},className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u._,{htmlFor:"title",children:"T\xedtulo del Objetivo"}),(0,i.jsx)(x.I,{id:"title",name:"title",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(u._,{htmlFor:"description",children:"Descripci\xf3n"}),(0,i.jsx)(x.I,{id:"description",name:"description"})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u._,{htmlFor:"area",children:"\xc1rea"}),(0,i.jsxs)(m.P,{id:"area",name:"area",required:!0,children:[(0,i.jsx)("option",{value:"",children:"Seleccionar..."}),(0,i.jsx)("option",{value:"COMERCIAL",children:"Comercial"}),(0,i.jsx)("option",{value:"MARKETING",children:"Marketing"}),(0,i.jsx)("option",{value:"ADMINISTRATIVA",children:"Administrativa"}),(0,i.jsx)("option",{value:"DIRECCION",children:"Direcci\xf3n"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(u._,{htmlFor:"period",children:"Per\xedodo"}),(0,i.jsxs)(m.P,{id:"period",name:"period",required:!0,children:[(0,i.jsx)("option",{value:"",children:"Seleccionar..."}),(0,i.jsx)("option",{value:"ANUAL",children:"Anual"}),(0,i.jsx)("option",{value:"TRIMESTRAL",children:"Trimestral"}),(0,i.jsx)("option",{value:"MENSUAL",children:"Mensual"})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(u._,{htmlFor:"startDate",children:"Fecha Inicio"}),(0,i.jsx)(x.I,{id:"startDate",name:"startDate",type:"date",required:!0})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(u._,{htmlFor:"endDate",children:"Fecha Fin"}),(0,i.jsx)(x.I,{id:"endDate",name:"endDate",type:"date",required:!0})]})]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,i.jsx)(c.z,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),(0,i.jsx)(c.z,{type:"submit",disabled:g.isPending,children:g.isPending?"Creando...":"Crear OKR"})]})]})})]}),(0,i.jsxs)("div",{className:"space-y-4",children:[null==y?void 0:y.map(e=>{var s;return(0,i.jsxs)(o.Zb,{children:[(0,i.jsx)(o.Ol,{children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(o.ll,{children:e.title}),(0,i.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e.description})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-primary-100 text-primary-800 rounded",children:e.area}),(0,i.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded",children:e.period})]})]})}),(0,i.jsx)(o.aY,{children:(0,i.jsx)("div",{className:"space-y-2",children:null===(s=e.keyResults)||void 0===s?void 0:s.map(e=>{let s=e.targetValue&&e.currentValue?e.currentValue/e.targetValue*100:0;return(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,i.jsx)("span",{children:e.title}),(0,i.jsxs)("span",{className:"font-medium",children:[e.currentValue||0," / ",e.targetValue||0," ",e.unit||""]})]}),(0,i.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,i.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all",style:{width:"".concat(Math.min(s,100),"%")}})})]},e.id)})})})]},e.id)}),(!y||0===y.length)&&(0,i.jsx)(o.Zb,{children:(0,i.jsx)(o.aY,{className:"py-8 text-center text-gray-500",children:"No hay OKRs creados. Crea tu primer OKR para comenzar."})})]})]})})}},5186:function(e,s,r){"use strict";r.d(s,{I:function(){return l}});var i=r(7437),t=r(2265),a=r(1994);let l=t.forwardRef((e,s)=>{let{className:r,type:t,...l}=e;return(0,i.jsx)("input",{type:t,className:(0,a.W)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:s,...l})});l.displayName="Input"},6815:function(e,s,r){"use strict";r.d(s,{_:function(){return l}});var i=r(7437),t=r(2265),a=r(1994);let l=t.forwardRef((e,s)=>{let{className:r,...t}=e;return(0,i.jsx)("label",{ref:s,className:(0,a.W)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",r),...t})});l.displayName="Label"},3647:function(e,s,r){"use strict";r.d(s,{P:function(){return l}});var i=r(7437),t=r(2265),a=r(1994);let l=t.forwardRef((e,s)=>{let{className:r,children:t,...l}=e;return(0,i.jsx)("select",{className:(0,a.W)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:s,...l,children:t})});l.displayName="Select"},9397:function(e,s,r){"use strict";r.d(s,{Z:function(){return i}});let i=(0,r(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])}},function(e){e.O(0,[301,21,429,713,82,971,117,744],function(){return e(e.s=5150)}),_N_E=e.O()}]);