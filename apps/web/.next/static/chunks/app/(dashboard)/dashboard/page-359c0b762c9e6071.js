(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[903],{1205:function(e,s,t){Promise.resolve().then(t.bind(t,9710))},9710:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var a=t(7437),l=t(1713),r=t(8320),n=t(6070),i=t(9116),c=t(8896),d=t(525),o=t(5252);function x(){var e;let{data:s}=(0,l.a)({queryKey:["okr-dashboard"],queryFn:async()=>(await i.Z.get("/okr/dashboard")).data}),{data:t}=(0,l.a)({queryKey:["pipeline-metrics"],queryFn:async()=>(await i.Z.get("/opportunities/pipeline/metrics")).data}),{data:x}=(0,l.a)({queryKey:["marketing-dashboard"],queryFn:async()=>(await i.Z.get("/marketing/dashboard")).data});return(0,a.jsx)(r.c,{children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Ejecutivo"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Vista general de m\xe9tricas y KPIs"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium",children:"Total OKRs"}),(0,a.jsx)(c.Z,{className:"h-4 w-4 text-gray-500"})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:(null==s?void 0:s.totalOkrs)||0}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"OKRs activos"})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium",children:"Progreso Promedio"}),(0,a.jsx)(d.Z,{className:"h-4 w-4 text-gray-500"})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[(null==s?void 0:s.averageProgress)||0,"%"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Avance general"})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium",children:"KRs Completados"}),(0,a.jsx)(c.Z,{className:"h-4 w-4 text-gray-500"})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[(null==s?void 0:s.completedKrs)||0," / ",(null==s?void 0:s.totalKrs)||0]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Resultados clave"})]})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium",children:"Valor Pipeline"}),(0,a.jsx)(o.Z,{className:"h-4 w-4 text-gray-500"})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",((null==t?void 0:t.totalValue)||0).toLocaleString()]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Valor total estimado"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Pipeline de Ventas"})}),(0,a.jsx)(n.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Valor Total"}),(0,a.jsxs)("span",{className:"text-lg font-semibold",children:["$",((null==t?void 0:t.totalValue)||0).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Valor Ponderado"}),(0,a.jsxs)("span",{className:"text-lg font-semibold",children:["$",((null==t?void 0:t.weightedValue)||0).toLocaleString()]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Total Oportunidades"}),(0,a.jsx)("span",{className:"text-lg font-semibold",children:(null==t?void 0:t.totalCount)||0})]}),(null==t?void 0:t.byStage)&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t",children:[(0,a.jsx)("div",{className:"text-sm font-medium mb-2",children:"Por Etapa:"}),Object.entries(t.byStage).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-gray-600",children:s}),(0,a.jsxs)("span",{className:"font-medium",children:["$",t.toLocaleString()]})]},s)})]})]})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Marketing"})}),(0,a.jsx)(n.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Total Campa\xf1as"}),(0,a.jsx)("span",{className:"text-lg font-semibold",children:(null==x?void 0:x.totalCampaigns)||0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Leads Generados"}),(0,a.jsx)("span",{className:"text-lg font-semibold",children:(null==x?void 0:x.totalLeads)||0})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Tasa de Conversi\xf3n"}),(0,a.jsxs)("span",{className:"text-lg font-semibold",children:[(null==x?void 0:null===(e=x.conversionRate)||void 0===e?void 0:e.toFixed(1))||0,"%"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Presupuesto Total"}),(0,a.jsxs)("span",{className:"text-lg font-semibold",children:["$",((null==x?void 0:x.totalBudget)||0).toLocaleString()]})]})]})})]})]})]})})}},8320:function(e,s,t){"use strict";t.d(s,{c:function(){return N}});var a=t(7437),l=t(2265),r=t(9376),n=t(7648),i=t(1994),c=t(5466),d=t(8896),o=t(5805),x=t(525),m=t(8736),h=t(7692),f=t(257);let u=[{name:"Dashboard",href:"/dashboard",icon:c.Z},{name:"OKR",href:"/okr",icon:d.Z},{name:"CRM",href:"/crm",icon:o.Z},{name:"Marketing",href:"/marketing",icon:x.Z},{name:"Administraci\xf3n",href:"/admin",icon:m.Z}];function j(){let e=(0,r.usePathname)();return(0,a.jsxs)("div",{className:"flex h-screen w-64 flex-col bg-gray-900 text-white",children:[(0,a.jsx)("div",{className:"flex h-16 items-center justify-center border-b border-gray-800",children:(0,a.jsx)("h1",{className:"text-xl font-bold",children:"Reiki OKR/CRM"})}),(0,a.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:u.map(s=>{let t=null==e?void 0:e.startsWith(s.href);return(0,a.jsxs)(n.default,{href:s.href,className:(0,i.W)("group flex items-center rounded-md px-3 py-2 text-sm font-medium transition-colors",t?"bg-primary-700 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[(0,a.jsx)(s.icon,{className:"mr-3 h-5 w-5"}),s.name]},s.name)})}),(0,a.jsx)("div",{className:"border-t border-gray-800 p-4",children:(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user");let e=f.env.NEXT_PUBLIC_BASE_PATH||"/OKR";window.location.href="".concat(e,"/login")},className:"flex w-full items-center rounded-md px-3 py-2 text-sm font-medium text-gray-300 hover:bg-gray-800 hover:text-white",children:[(0,a.jsx)(h.Z,{className:"mr-3 h-5 w-5"}),"Cerrar Sesi\xf3n"]})})]})}function g(){var e;let[s,t]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let e=localStorage.getItem("user");e&&t(JSON.parse(e))},[]),(0,a.jsx)("header",{className:"bg-white border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex h-16 items-center justify-between px-6",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Plataforma OKR/CRM"})}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:s&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary-700 flex items-center justify-center text-white font-semibold",children:null===(e=s.name)||void 0===e?void 0:e.charAt(0).toUpperCase()}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:s.name})]})})]})})}var p=t(257);function N(e){let{children:s}=e,t=(0,r.useRouter)(),[n,i]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{if(localStorage.getItem("token"))i(!1);else{let e=p.env.NEXT_PUBLIC_BASE_PATH||"/OKR";window.location.href="".concat(e,"/login")}},[t]),n)?(0,a.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary-700 border-r-transparent"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Cargando..."})]})}):(0,a.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,a.jsx)(j,{}),(0,a.jsxs)("div",{className:"flex flex-1 flex-col overflow-hidden",children:[(0,a.jsx)(g,{}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:s})]})]})}},6070:function(e,s,t){"use strict";t.d(s,{Ol:function(){return i},Zb:function(){return n},aY:function(){return d},ll:function(){return c}});var a=t(7437),l=t(2265),r=t(1994);let n=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.W)("rounded-lg border border-gray-200 bg-white shadow-sm",t),...l})});n.displayName="Card";let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.W)("flex flex-col space-y-1.5 p-6",t),...l})});i.displayName="CardHeader";let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("h3",{ref:s,className:(0,r.W)("text-2xl font-semibold leading-none tracking-tight",t),...l})});c.displayName="CardTitle",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("p",{ref:s,className:(0,r.W)("text-sm text-gray-500",t),...l})}).displayName="CardDescription";let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.W)("p-6 pt-0",t),...l})});d.displayName="CardContent",l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)("div",{ref:s,className:(0,r.W)("flex items-center p-6 pt-0",t),...l})}).displayName="CardFooter"},9116:function(e,s,t){"use strict";var a=t(3464),l=t(257);let r=a.Z.create({baseURL:"".concat("http://localhost:4000","/api")});r.interceptors.request.use(e=>{let s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e}),r.interceptors.response.use(e=>e,e=>{var s;if((null===(s=e.response)||void 0===s?void 0:s.status)===401){localStorage.removeItem("token"),localStorage.removeItem("user");let e=l.env.NEXT_PUBLIC_BASE_PATH||"/OKR";window.location.href="".concat(e,"/login")}return Promise.reject(e)}),s.Z=r},5252:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])}},function(e){e.O(0,[301,21,429,713,971,117,744],function(){return e(e.s=1205)}),_N_E=e.O()}]);